"use strict";var express=require("express"),path=require("path"),multer=require("multer"),upload=multer({dest:__dirname+"/uploads/images"}),app=express(),PORT=3e3;app.set("view engine","ejs");var imageStorage=multer.diskStorage({destination:"uploads/image",filename:function(e,a,i){i(null,a.fieldname+"_"+Date.now()+path.extname(a.originalname))}}),imageUpload=multer({storage:imageStorage,limits:{fileSize:1e6},fileFilter:function(e,a,i){if(!a.originalname.match(/\.(png|jpg)$/))return i(new Error("Please upload a Image"));i(void 0,!0)}});app.use(express.static("uploads")),app.post("/upload",imageUpload.single("photo"),function(e,a){a.render("upload.ejs",{im_loc:e.file.filename})},function(e,a,i,n){i.status(400).send({error:e.message})}),app.get("/",function(e,a){a.render("index.ejs")}),app.get("/officer",function(e,a){a.render("officer.ejs")}),app.get("/agent",function(e,a){a.render("agent.ejs")}),app.get("/map",function(e,a){a.render("map.ejs")}),app.listen(PORT,function(){console.log("Listening at "+PORT)});
//# sourceMappingURL=server.min.js.map
